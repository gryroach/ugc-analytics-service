# Сервис для хранения аналитической информации пользователей кинотеатра

### [Функциональные и нефункциональные требования](docs/specification.md) 

### Запуск проекта

Запуск всех контейнеров:
```bash
make run-all
```
Можно запустить Event-API отдельно. Он запускается с кафкой, но для первого запуска 
нужно создать топик. Это можно сделать с помощью:

```bash
make run-kafka
```

После этого можно просматривать сообщения в http://localhost:8080/.

Документация к API находится по адресу http://localhost/api-event/openapi

Перенос данных из Kafka в ClickHouse включается при запуске всех контейнеров. 

### Research

#### Генерация отчета

- Переходим в директорию research:
```bash
cd research
```

- Запускаем сервисы Clickhouse, Vertica и Postgres для аггрегации метрик
```bash
docker compose up
```
- После того, как все сервисы поднялись запускаем скрипт
```bash
python main.py
```
- После формирования отчета останавливаем контейнеры
```bash
docker compose down -v
```

Полученный отчет - файл `report.md`.
